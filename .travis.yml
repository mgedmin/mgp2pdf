language: python
sudo: false
python:
    - 2.7
    - 3.3
    - 3.4
    - 3.5
    - pypy
addons:
  apt:
    sources:
      - pypy
    packages:
      - pypy
      - pypy-dev
install:
    - if [ "$TRAVIS_PYTHON_VERSION" = "pypy" ];
        then virtualenv -p /usr/bin/pypy ~/.venv;
             . ~/.venv/bin/activate;
      fi
    - python --version
    - pip --version
    - pip install coverage coveralls mock -e .
script:
    - if [ "$TRAVIS_PYTHON_VERSION" = "pypy" ];
        then python tests.py;
      fi
    - if [ "$TRAVIS_PYTHON_VERSION" != "pypy" ];
        then coverage run --source=mgp2pdf.py tests.py;
      fi
after_success:
    - coveralls
notifications:
    email: false
